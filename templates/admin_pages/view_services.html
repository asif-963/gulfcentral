{% extends "admin_pages/base.html" %}
{% load static %}

{% block content %}
<div class="col-lg-12 stretch-card">
  <div class="card">
    <div class="card-body">
      <h4 class="card-title">Services</h4>
      <div class="table-responsive">
        <table class="table table-bordered">
          <thead class="thead-light">
            <tr>
              <th>Name</th>
              <th>Category</th>
              <th>Image</th>
              <th>Description</th>
              <th>Process Steps</th>
              <th>FAQs</th>
              <th>Update</th>
              <th>Delete</th>
            </tr>
          </thead>
          <tbody>
            {% for service in services %}
            <tr>
              <td>{{ service.name }}</td>
              <td>{{ service.category.menu.name }} â†’ {{ service.category.name }}</td>
              <td>
                {% if service.image %}
                  <img src="{{ service.image.url }}" style="width: 80px; height: 80px;" />
                {% else %}
                  No Image
                {% endif %}
              </td>
              <td style="max-width: 300px; overflow: auto;">{{ service.description|safe }}</td>
              <td style="max-width: 200px; overflow: auto;">
                {% for step in service.process_steps.all %}
                  <strong>Step {{ step.step_number }}:</strong> {{ step.title }}<br>
                {% empty %}
                  No Steps
                {% endfor %}
              </td>
              <td style="max-width: 200px; overflow: auto;">
                {% for faq in service.faqs.all %}
                  <strong>Q:</strong> {{ faq.question }}<br>
                  <strong>A:</strong> {{ faq.answer }}<br><hr>
                {% empty %}
                  No FAQs
                {% endfor %}
              </td>
              <td>
                <a href="{% url 'update_service' service.id %}" class="btn btn-warning btn-sm">Update</a>
              </td>
              <td>
                <a href="{% url 'delete_service' service.id %}" class="btn btn-danger btn-sm">Delete</a>
              </td>
            </tr>
            {% empty %}
            <tr>
              <td colspan="8" class="text-center">No Services available.</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
{% endblock %}
